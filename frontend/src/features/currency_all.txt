==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\components\CoinIcon.tsx ====
import React, { useState } from 'react';
import { Avatar } from '@mui/material';
import Image from 'next/image'; // <-- Importação do componente otimizado

interface CoinIconProps {
  symbol: string;
  name?: string;
  size?: number;
}

const CoinIcon = ({ symbol, name, size = 40 }: CoinIconProps) => {
  const [error, setError] = useState(false);
  const cleanSymbol = symbol ? symbol.toLowerCase().trim() : '';

  // URL da CDN
  const iconUrl = `https://cdn.jsdelivr.net/gh/atomiclabs/cryptocurrency-icons@1a6353048692227c97a53c2515a850e6c651632d/128/color/${cleanSymbol}.png`;

  // Fallback específico para BRL
  if (cleanSymbol === 'brl') {
     return (
        <div style={{ width: size, height: size, position: 'relative', borderRadius: '50%', overflow: 'hidden' }}>
            <Image 
                src="https://flagcdn.com/w80/br.png" 
                alt="BRL" 
                width={size}
                height={size}
                style={{ objectFit: 'cover' }}
                unoptimized // Permite carregar de URL externa sem config
            />
        </div>
     );
  }

  // Fallback se a imagem não existir (mostra a inicial)
  if (error || !cleanSymbol) {
    return (
      <Avatar sx={{ width: size, height: size, bgcolor: '#F0B90B', color: '#000', fontWeight: 'bold', fontSize: size * 0.4 }}>
        {symbol ? symbol[0].toUpperCase() : '?'}
      </Avatar>
    );
  }

  return (
    <Image 
        src={iconUrl} 
        alt={name || symbol} 
        width={size} 
        height={size}
        className="rounded-full shadow-sm bg-white/5"
        onError={() => setError(true)}
        unoptimized // Permite carregar de URL externa sem config
    />
  );
};

export default CoinIcon;

---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\components\CurrencyForm.tsx ====
import React, { useState, useEffect } from "react";
import { Currency, Backing } from "../types/Currency";
import TextField from "@mui/material/TextField";
import Button from "@mui/material/Button";
import MenuItem from "@mui/material/MenuItem";
import Checkbox from "@mui/material/Checkbox";
import FormControlLabel from "@mui/material/FormControlLabel";
import Stack from "@mui/material/Stack";
import Box from "@mui/material/Box";
import MonetizationOnIcon from "@mui/icons-material/MonetizationOn";
import CurrencyBitcoinIcon from "@mui/icons-material/CurrencyBitcoin";
import EuroIcon from "@mui/icons-material/Euro";
import AttachMoneyIcon from "@mui/icons-material/AttachMoney";
import CurrencyYenIcon from "@mui/icons-material/CurrencyYen";
import CurrencyExchangeIcon from "@mui/icons-material/CurrencyExchange";
import { yellowField } from "@/shared/theme/fieldStyles";

interface Props {
  initialValues: Currency;
  onSubmit: (currency: Currency) => void;
  loading?: boolean;
  onCancel?: () => void;
}

const backings: Backing[] = ["BRL", "USD", "JPY", "EUR", "CNY", "ARS"];

const iconOptions = [
  { label: "Padrão", value: "MonetizationOn" },
  { label: "Bitcoin", value: "CurrencyBitcoin" },
  { label: "Dólar", value: "AttachMoney" },
  { label: "Euro", value: "Euro" },
  { label: "Iene", value: "CurrencyYen" },
  { label: "Exchange", value: "CurrencyExchange" },
];

const iconMap: Record<string, JSX.Element> = {
  MonetizationOn: <MonetizationOnIcon />,
  CurrencyBitcoin: <CurrencyBitcoinIcon />,
  AttachMoney: <AttachMoneyIcon />,
  Euro: <EuroIcon />,
  CurrencyYen: <CurrencyYenIcon />,
  CurrencyExchange: <CurrencyExchangeIcon />,
};

const defaultForm: Currency = {
  name: "",
  symbol: "",
  description: "",
  status: true,
  backing: "USD",
  icon: "MonetizationOn",
};

const CurrencyForm: React.FC<Props> = ({ initialValues, onSubmit, loading, onCancel }) => {
  const safeInitialValues = { ...defaultForm, ...initialValues, icon: initialValues.icon || "MonetizationOn" };
  const [form, setForm] = useState<Currency>(safeInitialValues);

  useEffect(() => {
    setForm({ ...defaultForm, ...initialValues, icon: initialValues.icon || "MonetizationOn" });
    // eslint-disable-next-line
  }, [initialValues]);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value, type, checked } = e.target;
    setForm((prev) => ({
      ...prev,
      [name]: type === "checkbox" ? checked : value,
    }));
  };

  const handleSelectChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm((prev) => ({
      ...prev,
      backing: e.target.value as Backing,
    }));
  };

  const handleIconChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm((prev) => ({
      ...prev,
      icon: e.target.value,
    }));
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!form.icon) {
      alert("Selecione um ícone para a moeda.");
      return;
    }
    if (!form.name || !form.symbol || !form.description) {
      alert("Preencha todos os campos obrigatórios.");
      return;
    }
    if (!/^[A-Z0-9]{3,10}$/.test(form.symbol)) {
      alert("O símbolo deve ser em letras maiúsculas, sem espaços, ex: BTC, ETH, ADA.");
      return;
    }
    onSubmit(form);
  };

  return (
    <Box
      component="form"
      onSubmit={handleSubmit}
      sx={{
        p: { xs: 2, sm: 4 },
        display: "flex",
        flexDirection: "column",
        gap: 2,
        bgcolor: "#23272f",
        borderRadius: 3,
        boxShadow: 3,
        maxWidth: 500,
        mx: "auto",
      }}
    >
      <Stack spacing={2}>
        <TextField
          name="name"
          label="Nome"
          value={form.name}
          onChange={handleChange}
          required
          fullWidth
          sx={yellowField}
        />
        <TextField
          name="symbol"
          label="Símbolo (ex: BTC, ETH, ADA)"
          value={form.symbol}
          onChange={handleChange}
          required
          fullWidth
          sx={yellowField}
          inputProps={{ style: { textTransform: "uppercase" }, maxLength: 10 }}
        />
        <TextField
          name="description"
          label="Descrição"
          value={form.description}
          onChange={handleChange}
          required
          fullWidth
          sx={yellowField}
        />
        <Stack direction={{ xs: "column", sm: "row" }} spacing={2}>
          <TextField
            select
            name="backing"
            label="Backing"
            value={form.backing}
            onChange={handleSelectChange}
            required
            fullWidth
            sx={yellowField}
          >
            {backings.map((b) => (
              <MenuItem key={b} value={b}>{b}</MenuItem>
            ))}
          </TextField>
          <TextField
            select
            name="icon"
            label="Ícone"
            value={form.icon || "MonetizationOn"}
            onChange={handleIconChange}
            required
            fullWidth
            sx={yellowField}
          >
            {iconOptions.map((opt) => (
              <MenuItem key={opt.value} value={opt.value}>
                <Stack direction="row" alignItems="center" spacing={1}>
                  {iconMap[opt.value]}
                  <span>{opt.label}</span>
                </Stack>
              </MenuItem>
            ))}
          </TextField>
        </Stack>
        <FormControlLabel
          control={
            <Checkbox
              checked={!!form.status}
              onChange={handleChange}
              name="status"
              sx={{
                color: "#fcd34d",
                "&.Mui-checked": { color: "#fcd34d" },
              }}
            />
          }
          label="Ativo"
          sx={{ color: "#fff" }}
        />
        <Stack direction="row" spacing={2} justifyContent="flex-end">
          <Button
            type="submit"
            variant="contained"
            color="primary"
            disabled={loading}
            sx={{ minWidth: 120, fontWeight: "bold" }}
          >
            {loading ? "Salvando..." : "Salvar"}
          </Button>
          {onCancel && (
            <Button
              type="button"
              variant="outlined"
              color="inherit"
              onClick={onCancel}
              disabled={loading}
              sx={{
                minWidth: 120,
                fontWeight: "bold",
                borderColor: "#fcd34d",
                color: "#fcd34d"
              }}
            >
              Cancelar
            </Button>
          )}
        </Stack>
      </Stack>
    </Box>
  );
};

export default CurrencyForm;

---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\components\MarketsTable.tsx ====
// Caminho: frontend/src/features/currency/components/MarketsTable.tsx
"use client";

import React from 'react';
import { useRouter } from 'next/navigation';
import { Currency, History } from '../types/Currency';
import { useMarketsStore } from '../store/marketsStore';
import { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Box, Typography, IconButton, Tooltip, Avatar } from '@mui/material';
import { Star, ArrowUp, ArrowDown } from 'lucide-react';

interface MarketsTableProps {
  currencies: Currency[];
}

// Helper para calcular a variação em 24h
const getChange = (histories: History[] | undefined) => {
    if (!histories || histories.length < 2) return 0;
    const sorted = [...histories].sort((a, b) => new Date(b.datetime).getTime() - new Date(a.datetime).getTime());
    const latestPrice = sorted[0].price;
    const previousPrice = sorted[1].price;
    if (previousPrice === 0) return 0;
    return ((latestPrice - previousPrice) / previousPrice) * 100;
};

export const MarketsTable: React.FC<MarketsTableProps> = ({ currencies }) => {
  const router = useRouter();
  const { favorites, toggleFavorite } = useMarketsStore();

  const handleRowClick = (symbol: string) => {
    // Futuramente, isso levará para a página de detalhes da moeda
    // router.push(`/price/${symbol.toLowerCase()}`);
    console.log(`Navegar para detalhes de ${symbol}`);
  };

  return (
    <TableContainer>
      <Table>
        <TableHead>
          <TableRow>
            <TableCell sx={{ fontWeight: "bold", color: "#fcd34d", width: '5%' }}></TableCell>
            <TableCell sx={{ fontWeight: "bold", color: "#fcd34d" }}>Ativo</TableCell>
            <TableCell sx={{ fontWeight: "bold", color: "#fcd34d" }} align="right">Preço</TableCell>
            <TableCell sx={{ fontWeight: "bold", color: "#fcd34d" }} align="right">Variação (24h)</TableCell>
            <TableCell sx={{ fontWeight: "bold", color: "#fcd34d" }} align="right">Volume (24h)</TableCell>
          </TableRow>
        </TableHead>
        <TableBody>
          {currencies.map((coin) => {
            const isFavorite = favorites.includes(coin.symbol);
            const change = getChange(coin.histories);
            const isPositive = change >= 0;
            const latestPrice = coin.histories?.[0]?.price || 0;

            // Adicionado fallback para caso o ID não exista (segurança)
            const uniqueKey = coin.id ?? coin.symbol;

            return (
              <TableRow
                // ****** AQUI ESTÁ A MUDANÇA ******
                key={uniqueKey} // Alterado de coin.symbol para uniqueKey (que prioriza coin.id)
                // **********************************
                hover
                onClick={() => handleRowClick(coin.symbol)}
                sx={{ cursor: 'pointer', '&:last-child td, &:last-child th': { border: 0 } }}
              >
                <TableCell>
                  <Tooltip title={isFavorite ? "Remover dos Favoritos" : "Adicionar aos Favoritos"}>
                    <IconButton
                      size="small"
                      onClick={(e) => {
                        e.stopPropagation(); // Evita que o clique na estrela acione o clique na linha
                        toggleFavorite(coin.symbol);
                      }}
                    >
                      <Star size={20} fill={isFavorite ? '#fcd34d' : 'none'} color={isFavorite ? '#fcd34d' : 'gray'} />
                    </IconButton>
                  </Tooltip>
                </TableCell>
                <TableCell>
                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>
                    <Avatar sx={{ bgcolor: '#333', width: 32, height: 32 }}>{coin.symbol.charAt(0)}</Avatar>
                    <Box>
                      <Typography fontWeight="bold">{coin.name}</Typography>
                      <Typography variant="body2" color="text.secondary">{coin.symbol}</Typography>
                    </Box>
                  </Box>
                </TableCell>
                <TableCell align="right">
                  <Typography fontWeight="medium">{latestPrice.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</Typography>
                </TableCell>
                <TableCell align="right">
                  <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end', color: isPositive ? 'success.main' : 'error.main' }}>
                    {isPositive ? <ArrowUp size={16} /> : <ArrowDown size={16} />}
                    <Typography fontWeight="medium" sx={{ ml: 0.5 }}>{change.toFixed(2)}%</Typography>
                  </Box>
                </TableCell>
                <TableCell align="right">
                  <Typography color="text.secondary">R$ --</Typography> {/* Placeholder para Volume */}
                </TableCell>
              </TableRow>
            );
          })}
        </TableBody>
      </Table>
    </TableContainer>
  );
};

---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\pages\MarketsPage.tsx ====
'use client';
import React, { useEffect, useState, useMemo } from 'react';
import { Search, TrendingUp, TrendingDown, ArrowRightLeft, LineChart, ChevronDown, ChevronUp, Info, Activity } from 'lucide-react';
import { useMarketsStore } from '../store/marketsStore';
import { LineChart as RechartsLine, Line, ResponsiveContainer, YAxis } from 'recharts';
import { motion, AnimatePresence } from 'framer-motion';
import Link from 'next/link';
import { Currency } from '../types/Currency';

// --- Componente Sparkline (Mini Gráfico) ---
const Sparkline = ({ data, color }: { data: any[], color: string }) => {
  if (!data || data.length < 2) return <div className="h-10 w-24 bg-white/5 rounded flex items-center justify-center text-[10px] text-gray-600">--</div>;
  
  return (
    <div className="h-12 w-32">
      <ResponsiveContainer width="100%" height="100%">
        <RechartsLine data={data}>
          <Line type="monotone" dataKey="price" stroke={color} strokeWidth={2} dot={false} isAnimationActive={false} />
          <YAxis domain={['dataMin', 'dataMax']} hide />
        </RechartsLine>
      </ResponsiveContainer>
    </div>
  );
};

// --- Componente de Linha Expansível (MarketRow) ---
const MarketRow = ({ coin }: { coin: any }) => {
  const [isExpanded, setIsExpanded] = useState(false);

  // Calcula maior e menor preço do histórico para exibir nos detalhes
  const high24h = coin.histories?.length ? Math.max(...coin.histories.map((h: any) => h.price)) : 0;
  const low24h = coin.histories?.length ? Math.min(...coin.histories.map((h: any) => h.price)) : 0;

  return (
    <motion.div 
      layout 
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className={`border-b border-white/5 transition-colors duration-300 ${isExpanded ? 'bg-white/[0.03]' : 'hover:bg-white/[0.02]'}`}
    >
      {/* Linha Principal (Clicável) */}
      <div 
        onClick={() => setIsExpanded(!isExpanded)}
        className="grid grid-cols-12 gap-4 p-5 items-center cursor-pointer group"
      >
        {/* Coluna 1: Nome e Ícone */}
        <div className="col-span-5 md:col-span-3 flex items-center gap-4 pl-2">
          <div className={`w-10 h-10 rounded-2xl flex items-center justify-center text-black font-bold shadow-lg transition-all duration-300 group-hover:scale-110 ${isExpanded ? 'bg-yellow-500 shadow-yellow-500/30' : 'bg-white/10 text-white'}`}>
            {coin.symbol[0]}
          </div>
          <div>
            <span className={`block font-bold transition-colors ${isExpanded ? 'text-yellow-500' : 'text-white'}`}>{coin.name}</span>
            <span className="block text-xs text-gray-500 font-mono">{coin.symbol}</span>
          </div>
        </div>

        {/* Coluna 2: Preço */}
        <div className="col-span-4 md:col-span-2 text-right font-mono font-medium text-white">
          R$ {coin.latestPrice.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 8 })}
        </div>

        {/* Coluna 3: Variação */}
        <div className="col-span-3 md:col-span-2 text-right flex justify-end items-center gap-1">
          <span className={`flex items-center gap-1 text-sm font-bold ${coin.isPositive ? 'text-emerald-400' : 'text-rose-400'}`}>
            {coin.isPositive ? <TrendingUp size={14} /> : <TrendingDown size={14} />}
            {Math.abs(coin.change).toFixed(2)}%
          </span>
        </div>

        {/* Coluna 4: Sparkline (Desktop) */}
        <div className="hidden md:flex md:col-span-3 justify-center items-center opacity-70">
          <Sparkline data={coin.chartData} color={coin.isPositive ? '#34d399' : '#fb7185'} />
        </div>

        {/* Coluna 5: Ícone de Expandir */}
        <div className="hidden md:flex md:col-span-2 justify-end pr-4 text-gray-500">
          {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
        </div>
      </div>

      {/* Detalhes Expansíveis */}
      <AnimatePresence>
        {isExpanded && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            className="overflow-hidden bg-[#0a0f1e]/50"
          >
            <div className="p-6 grid grid-cols-1 md:grid-cols-2 gap-8 border-t border-white/5 mx-4">
              
              {/* Esquerda: Info & Stats */}
              <div className="space-y-4">
                <div className="flex items-start gap-3">
                  <Info className="text-yellow-500 mt-1" size={18} />
                  <div>
                    <h4 className="text-sm font-bold text-gray-300 uppercase tracking-wide mb-1">Sobre {coin.name}</h4>
                    <p className="text-sm text-gray-400 leading-relaxed max-w-md">
                      {coin.description || "Uma criptomoeda descentralizada operando em blockchain global."}
                    </p>
                  </div>
                </div>
                
                <div className="flex gap-6 mt-4">
                  <div>
                    <p className="text-xs text-gray-500 uppercase">Máxima (24h)</p>
                    <p className="font-mono text-white font-bold">R$ {high24h.toLocaleString('pt-BR', { maximumFractionDigits: 2 })}</p>
                  </div>
                  <div>
                    <p className="text-xs text-gray-500 uppercase">Mínima (24h)</p>
                    <p className="font-mono text-white font-bold">R$ {low24h.toLocaleString('pt-BR', { maximumFractionDigits: 2 })}</p>
                  </div>
                  <div>
                    <p className="text-xs text-gray-500 uppercase">Backing</p>
                    <span className="inline-block px-2 py-0.5 rounded bg-white/10 text-xs text-white font-bold border border-white/10">
                      {coin.backing}
                    </span>
                  </div>
                </div>
              </div>

              {/* Direita: Ações */}
              <div className="flex flex-col justify-center items-end gap-3">
                <Link href="/dashboard" className="w-full md:w-auto">
                  <button className="w-full md:w-auto flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-yellow-500 hover:bg-yellow-400 text-black font-bold transition-all shadow-[0_0_20px_rgba(240,185,11,0.2)] hover:shadow-[0_0_30px_rgba(240,185,11,0.4)] active:scale-95">
                    <ArrowRightLeft size={18} /> Negociar {coin.symbol} Agora
                  </button>
                </Link>
                <p className="text-xs text-gray-500 flex items-center gap-1">
                  <Activity size={12} className="animate-pulse text-green-500" /> Mercado Aberto • Alta Liquidez
                </p>
              </div>

            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.div>
  );
};

export default function MarketsPage() {
  const { currencies, loading, fetchCurrencies } = useMarketsStore();
  const [searchTerm, setSearchTerm] = useState('');

  useEffect(() => {
    fetchCurrencies();
  }, [fetchCurrencies]);

  const filteredCurrencies = useMemo(() => {
    return currencies
      .filter(c => 
        c.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
        c.symbol.toLowerCase().includes(searchTerm.toLowerCase())
      )
      .map(coin => {
        const history = coin.histories ? [...coin.histories].sort((a, b) => new Date(a.datetime).getTime() - new Date(b.datetime).getTime()) : [];
        const latestPrice = history.length > 0 ? history[history.length - 1].price : 0;
        const startPrice = history.length > 0 ? history[0].price : 0;
        const change = startPrice === 0 ? 0 : ((latestPrice - startPrice) / startPrice) * 100;
        
        return {
          ...coin,
          latestPrice,
          change,
          isPositive: change >= 0,
          chartData: history.map(h => ({ price: h.price })),
          histories: history // Passando histórico ordenado
        };
      });
  }, [currencies, searchTerm]);

  return (
    <div className="min-h-screen bg-[#020617] text-white p-6 md:p-10 pb-20">
      
      {/* Header da Página */}
      <div className="max-w-7xl mx-auto mb-12 flex flex-col md:flex-row justify-between items-end gap-6">
        <div>
          <h1 className="text-4xl font-bold text-white mb-2 flex items-center gap-3 tracking-tight">
            <LineChart className="text-yellow-500" size={36} />
            Mercados
          </h1>
          <p className="text-gray-400 text-lg">Visão geral dos ativos e oportunidades em tempo real.</p>
        </div>

        {/* Barra de Pesquisa "Glass" */}
        <div className="relative w-full md:w-96 group">
          <div className="absolute inset-0 bg-yellow-500/20 rounded-xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"></div>
          <div className="relative">
            <Search className="absolute left-4 top-3.5 text-gray-500 group-focus-within:text-yellow-500 transition-colors" size={20} />
            <input 
              type="text" 
              placeholder="Buscar moeda (ex: Bitcoin, ETH)..." 
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full bg-[#0f172a]/80 backdrop-blur border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-gray-600 focus:outline-none focus:border-yellow-500/50 focus:ring-1 focus:ring-yellow-500/50 transition-all shadow-xl"
            />
          </div>
        </div>
      </div>

      {/* Tabela de Mercados */}
      <div className="max-w-7xl mx-auto">
        <div className="glass-panel rounded-3xl overflow-hidden border border-white/5 shadow-2xl bg-[#0f172a]/40 backdrop-blur-xl">
          
          {/* Cabeçalho da Tabela */}
          <div className="grid grid-cols-12 gap-4 p-5 border-b border-white/5 bg-black/20 text-xs font-bold text-gray-500 uppercase tracking-wider">
            <div className="col-span-5 md:col-span-3 pl-2">Ativo</div>
            <div className="col-span-4 md:col-span-2 text-right">Preço</div>
            <div className="col-span-3 md:col-span-2 text-right">24h %</div>
            <div className="hidden md:block md:col-span-3 text-center">Tendência (7D)</div>
            <div className="hidden md:block md:col-span-2 text-right pr-4"></div>
          </div>

          {/* Lista */}
          <div>
            {loading ? (
              [1, 2, 3, 4, 5].map((i) => (
                <div key={i} className="h-20 border-b border-white/5 bg-white/[0.01] animate-pulse flex items-center px-6">
                   <div className="h-10 w-10 bg-white/5 rounded-full mr-4"></div>
                   <div className="h-4 w-32 bg-white/5 rounded"></div>
                </div>
              ))
            ) : filteredCurrencies.length === 0 ? (
              <div className="p-16 text-center">
                <div className="inline-flex p-4 rounded-full bg-white/5 mb-4">
                    <Search size={32} className="text-gray-600" />
                </div>
                <h3 className="text-lg font-bold text-gray-300">Nenhuma moeda encontrada</h3>
                <p className="text-gray-500 mt-2">Tente buscar por outro nome ou símbolo.</p>
              </div>
            ) : (
              filteredCurrencies.map((coin) => (
                <MarketRow key={coin.id} coin={coin} />
              ))
            )}
          </div>
        </div>
      </div>
    </div>
  );
}

---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\services\currencyService.ts ====
import apiClient from "@/shared/api/apiClient";
import { currencyAPI } from "@/shared/api/api";
import { Currency } from "../types/Currency";

const currencyService = {
  getAll: async (): Promise<Currency[]> => {
    const response = await apiClient.get(currencyAPI.getAll());
    return response.data;
  },

  getById: async (id: number): Promise<Currency> => {
    const response = await apiClient.get(currencyAPI.getById(id));
    return response.data;
  },

  create: async (currency: Omit<Currency, "id" | "histories">): Promise<Currency> => {
    const response = await apiClient.post(currencyAPI.create(), currency);
    return response.data;
  },

  update: async (id: number, currency: Partial<Currency>): Promise<Currency> => {
    const response = await apiClient.put(currencyAPI.update(id), currency);
    return response.data;
  },

  delete: async (id: number): Promise<void> => {
    await apiClient.delete(currencyAPI.delete(id));
  },
};

export default currencyService;



---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\store\marketsStore.ts ====
import { create } from 'zustand';
import currencyService from '@/features/currency/services/currencyService';
import { Currency } from '../types/Currency';

// Função para carregar os favoritos do localStorage
const loadFavorites = (): string[] => {
  if (typeof window === 'undefined') return [];
  const favorites = localStorage.getItem('cryptoFavorites');
  return favorites ? JSON.parse(favorites) : [];
};

interface MarketsState {
  currencies: Currency[];
  favorites: string[]; // Armazenaremos os símbolos das moedas favoritas (ex: 'BTC', 'ETH')
  loading: boolean;
  error: string | null;
  fetchCurrencies: () => Promise<void>;
  toggleFavorite: (symbol: string) => void;
}

export const useMarketsStore = create<MarketsState>((set) => ({
  currencies: [],
  favorites: loadFavorites(),
  loading: false,
  error: null,

  fetchCurrencies: async () => {
    set({ loading: true, error: null });
    try {
      // Usando o seu currencyService existente!
      const data = await currencyService.getAll();
      set({ currencies: data, loading: false });
    } catch (error) {
      console.error("Erro ao buscar moedas:", error);
      set({ error: 'Falha ao carregar dados do mercado.', loading: false });
    }
  },

  toggleFavorite: (symbol: string) => {
    set((state) => {
      const newFavorites = state.favorites.includes(symbol)
        ? state.favorites.filter((fav) => fav !== symbol)
        : [...state.favorites, symbol];
      
      localStorage.setItem('cryptoFavorites', JSON.stringify(newFavorites));
      return { favorites: newFavorites };
    });
  },
}));

---- end of file ----

==== C:\dev\AMS_HoldCrypto\frontend\src\features\currency\types\Currency.ts ====
export type Backing = "BRL" | "USD" | "JPY" | "EUR" | "CNY" | "ARS";

export interface History {
  id: number;
  datetime: string;
  price: number;
  currencyId: number;
}

export interface Currency {
  id?: number;
  name: string;
  symbol: string; // NOVO CAMPO
  description: string;
  status: boolean;
  backing: Backing;
  icon: string;
  histories?: History[];
}

---- end of file ----

